<div class="login-div" id="login-div">
  <div id="logged" *ngIf="user; else showLogin">
    <h1>Hello {{ user.mail }}!</h1>
    <button id="logout" mat-raised-button color="warn" (click)="logout()">Logout</button>

    <mat-accordion>
      <mat-expansion-panel (opened)="panelOpenState"
                           (closed)="panelOpenState">
          <mat-expansion-panel-header>
              <mat-panel-title>
                  Your trips
              </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-divider></mat-divider>
          <div *ngFor="let order_item of user.orders">
            <div class="block">
              <p>Trip name: {{ order_item.wycieczka.name }}</p>
              <p>Trip country: {{ order_item.wycieczka.country }}</p>
              <p>Start date: {{ order_item.startDate  | date:"dd/MM/yy"  }}</p>
              <p>End date: {{ order_item.endDate  | date:"dd/MM/yy" }}</p>
              <p>Seats: {{ order_item.quantity }}</p>
              <p>Total price: {{ order_item.total_price }} {{ order_item.wycieczka.currency }}</p>
            </div>
            <mat-divider></mat-divider>
          </div>
      </mat-expansion-panel>
    </mat-accordion>    
  </div>

  <ng-template #showLogin>
    <div id="not-logged" class="flex-column">
      <h2>Please login.</h2>
      <div mat-dialog-content class="flex-column">
        <mat-form-field id='login-matfield' class="example-full-width">
        <mat-label>E-mail</mat-label>
        <input matInput type="email" id="login-field" placeholder="E-mail" [(ngModel)]='mail'>
        </mat-form-field>
    
        <mat-form-field class="example-full-width">
        <mat-label>Password</mat-label>
        <input matInput type="password" id="password-field" placeholder="Password." [(ngModel)]='password'>
        </mat-form-field>
      </div>
      <button mat-raised-button color="warn" id="login-bttn" (click)="login()">Login</button>
      <p>If you don't have account:</p>
      <button mat-raised-button color="warn"  [routerLink]="'/sign-up'">Create account</button>
    </div>
  </ng-template>
</div> 